<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"        
      xmlns:t="http://java.sun.com/jsf/composite/components"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <cc:interface>
        <cc:attribute name="controller"/>
        <cc:attribute name="casePrefix" class="String"/> 
        <!--
        Caso um dos atributos abaixo seja especificado
        obriga o preenchimento dos demais
        -->
        <cc:attribute name="value"/>
        <cc:attribute name="selection"/>
        <cc:attribute name="actionListener" method-signature="java.lang.String action()"/>
        <cc:attribute name="lazy"/>
    </cc:interface>

    <cc:implementation>
        <h:outputText value="#{'Value:'}#{cc.attrs.value}"/>
        <h:outputText value="#{'Selection:'}#{cc.attrs.selection}"/>
        <h:outputText value="#{'ActionListener:'}#{cc.attrs.actionListener}"/> 
        <h:outputText value="#{'Lazy:'}#{cc.attrs.lazy}"/>         
   
        <c:if test="#{!empty cc.attrs.value}">
            <h:outputText value="#{'IF PARAMETRIZADO'}"/>                     
            <p:dataTable id="#{cc.attrs.casePrefix.concat('DT')}" 
                         value="#{cc.attrs.value}"  
                         var="item" paginator="true" rows="10" 
                         paginatorPosition="top" paginatorAlwaysVisible="false" 
                         selection="#{cc.attrs.selection}"  
                         lazy="#{cc.attrs.lazy}" filterDelay="600" 
                         class="listDT">  
                <cc:insertChildren/>
                <p:column width="6%">
                    <f:facet name="header">
                        <p:outputLabel value="#{messages.ActionLink}"/>
                    </f:facet>
                    <c:if test="#{empty cc.attrs.actionListener}">
                        <p:commandButton oncomplete="PF('#{cc.attrs.casePrefix.concat('EditDlg')}').show()" title="#{messages.EditLink}" icon="ui-icon-pencil" actionListener="#{cc.attrs.controller.prepareEdit}" update="@(.editForm)"/>                                                                
                    </c:if>
                    <c:if test="#{!empty cc.attrs.actionListener}">
                        <p:commandButton oncomplete="PF('#{cc.attrs.casePrefix.concat('EditDlg')}').show()" title="#{messages.EditLink}" icon="ui-icon-pencil" actionListener="#{cc.attrs.actionListener}" update="@(.editForm)"/>                                                                
                    </c:if>
                </p:column>
            </p:dataTable>                
        </c:if>

        <c:if test="#{empty cc.attrs.value}">
            <h:outputText value="#{'IF PADRÃƒO'}"/>                                 
            <p:dataTable id="#{cc.attrs.casePrefix.concat('DT')}" 
                         value="#{cc.attrs.controller.lazyItems}"  
                         var="item" paginator="true" rows="10" 
                         paginatorPosition="top" paginatorAlwaysVisible="false" 
                         selection="#{cc.attrs.controller.selected}"  
                         lazy="true" filterDelay="600" 
                         class="listDT">        
                <cc:insertChildren/>
                <p:column width="6%">
                    <f:facet name="header">
                        <p:outputLabel value="#{messages.ActionLink}"/>
                    </f:facet>
                    <c:if test="#{empty cc.attrs.actionListener}">
                        <p:commandButton oncomplete="PF('#{cc.attrs.casePrefix.concat('EditDlg')}').show()" title="#{messages.EditLink}" icon="ui-icon-pencil" actionListener="#{cc.attrs.controller.prepareEdit}" update="@(.editForm)"/>                                                                
                    </c:if>
                    <c:if test="#{!empty cc.attrs.actionListener}">
                        <p:commandButton oncomplete="PF('#{cc.attrs.casePrefix.concat('EditDlg')}').show()" title="#{messages.EditLink}" icon="ui-icon-pencil" actionListener="#{cc.attrs.actionListener}" update="@(.editForm)"/>                                                                
                    </c:if>
                </p:column>
            </p:dataTable>                
        </c:if>        
    </cc:implementation>
</html>