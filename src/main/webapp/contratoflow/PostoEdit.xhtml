<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:t="http://xmlns.jcp.org/jsf/composite/components"
                template="/template.xhtml">
    <ui:define name="content">    
        <t:FormFlowCreate id="postoDeTrabalhoEdit" 
                          casePrefix="postoDeTrabalhoEdit" 
                          entityToUpdate="#{contratoFlowController.postoNovo}" 
                          saveAction="#{contratoFlowController.saveOrCreate()}"
                          goBackToAction="#{contratoFlowController.goBackTo('Edit')}">
            <t:FormRowAutoComplete id="postoDeTrabalhoCargoOuFuncao" 
                                   autoCompleteValue="#{contratoFlowController.postoNovo.cargoOuFuncao}" 
                                   autoCompleteItem="cargoOuFuncao" 
                                   autoCompleteItemLabel="#{cargoOuFuncao.toString()}" 
                                   autoCompleteItemValue="#{cargoOuFuncao}" 
                                   completeMethod="#{cargoOuFuncaoController.complete}" 
                                   labelValue="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_cargoOuFuncao')}"
                                   autoCompleteConverter="#{cargoOuFuncaoConverter}"
                                   autoCompleteSize="40"/>
            <t:FormRowAutoComplete id="postoDeTrabalhoJornada" 
                                   autoCompleteValue="#{contratoFlowController.postoNovo.jornada}" 
                                   autoCompleteItem="jornada" 
                                   autoCompleteItemLabel="#{jornada.toString()}" 
                                   autoCompleteItemValue="#{jornada}" 
                                   completeMethod="#{jornadaController.complete}" 
                                   labelValue="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_jornada')}"
                                   autoCompleteConverter="#{jornadaConverter}"
                                   autoCompleteSize="30"/><br/>
            <t:FormRowCheckMulti id="postoDeTrabalhoDiasComputados" 
                                 labelValue="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_diasComputados')}" 
                                 itemValues="#{calendarioFeriadoController.diasComputados}" 
                                 selectValue="#{contratoFlowController.postoNovo.diasComputados}" 
                                 selectConverter="#{diasComputadosConverter}"/>
            <t:FormRowAutoComplete id="postoDeTrabalhoFeriadoCalendario" 
                                   autoCompleteValue="#{contratoFlowController.postoNovo.feriadoCalendario}" 
                                   autoCompleteItem="feriadoCalendario" 
                                   autoCompleteItemLabel="#{feriadoCalendario.toString()}" 
                                   autoCompleteItemValue="#{feriadoCalendario}" 
                                   completeMethod="#{calendarioFeriadoController.complete}" 
                                   labelValue="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_feriadoCalendario')}"
                                   autoCompleteConverter="#{calendarioFeriadoConverter}"
                                   autoCompleteSize="30"/> 
            <p:tabView id="alocacaoTabs">
                <p:tab title="#{contratoFlowController.getTabHeader('PostoDeTrabalho_Alocacao')}">
                    <t:ListFlowView selection="#{contratoFlowController.alocacaoNova}" 
                                    value="#{contratoFlowController.postoNovo.alocacoes}" 
                                    casePrefix="alocacao" 
                                    action="#{contratoFlowController.prepareAlocacaoEdit}" 
                                    controller="#{contratoFlowController}" 
                                    id="alocacao"
                                    specificValues="true">
                        <f:facet name="header">
                            <div class="alignRight">
                                <p:commandButton action="#{contratoFlowController.prepareAlocacaoNova}"
                                                 value="#{messages.CreateLink}"/>
                            </div>
                        </f:facet>
                        <p:column width="25%" 
                                  headerText="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_Alocacao_titular')}">
                            <h:outputText value="#{item.titular.colaborador.toString()}"/>
                        </p:column>   
                        <p:column width="25%" 
                                  headerText="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_Alocacao_substituto')}">
                            <h:outputText value="#{item.substituto.colaborador.toString()}"/>
                        </p:column>                       
                    </t:ListFlowView>
                </p:tab>
                <p:tab title="#{contratoFlowController.getTabHeader('PostoDeTrabalho_Remuneracao')}">
                    <t:ListFlowView selection="#{contratoFlowController.remuneracaoNova}" 
                                    value="#{contratoFlowController.postoNovo.remuneracoes}" 
                                    casePrefix="remuneracao" 
                                    action="#{contratoFlowController.prepareRemuneracaoEdit}" 
                                    controller="#{contratoFlowController}" 
                                    id="remuneracao"
                                    specificValues="true">
                        <f:facet name="header">
                            <div class="alignRight">
                                <p:commandButton action="#{contratoFlowController.prepareRemuneracaoNova}"
                                                 value="#{messages.CreateLink}"/>
                            </div>
                        </f:facet>
                        <p:column headerText="#{contratoFlowController.getMsgFieldLabel('PostoDeTrabalho_Remuneracao_valor')}"
                                  styleClass="alignRight">
                            <t:OutputMonetary value="#{item.valor}"/>
                        </p:column>   
                    </t:ListFlowView>
                </p:tab>

            </p:tabView>        

        </t:FormFlowCreate>
    </ui:define>
</ui:composition>

