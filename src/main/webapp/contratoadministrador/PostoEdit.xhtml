<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:t="http://xmlns.jcp.org/jsf/composite/components"
                template="/template.xhtml">
    <ui:define name="header">
        <p:importEnum type="br.jus.trt23.contavinculada.enums.EDiasComputados"
                      allSuffix="ALL_DIAS" var="DC"/>
    </ui:define>
    <ui:define name="content">     
        <t:FormFlowCreate id="postoDeTrabalhoEdit" 
                          casePrefix="postoDeTrabalhoEdit" 
                          entityToUpdate="#{contratoAdministradorFlow.controller.postoNovo}" 
                          saveAction="#{contratoAdministradorFlow.controller.saveOrCreate}"
                          goBackToAction="#{contratoAdministradorFlow.controller.goBackTo('Edit')}"
                          controller="#{contratoAdministradorFlow.controller}" mostrarVigencia="false">
            <t:FormRowAutoComplete id="postoDeTrabalhoCargoOuFuncao" 
                                   autoCompleteValue="#{contratoAdministradorFlow.controller.postoNovo.cargoOuFuncao}" 
                                   autoCompleteItem="cargoOuFuncao" 
                                   autoCompleteItemLabel="#{cargoOuFuncao.toString()}" 
                                   autoCompleteItemValue="#{cargoOuFuncao}" 
                                   completeMethod="#{cargoOuFuncaoController.complete}" 
                                   labelValue="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_cargoOuFuncao')}"
                                   autoCompleteConverter="#{cargoOuFuncaoConverter}"
                                   autoCompleteSize="40"/>
            <t:FormRowAutoComplete id="postoDeTrabalhoJornada" 
                                   autoCompleteValue="#{contratoAdministradorFlow.controller.postoNovo.jornada}" 
                                   autoCompleteItem="jornada" 
                                   autoCompleteItemLabel="#{jornada.toString()}" 
                                   autoCompleteItemValue="#{jornada}" 
                                   completeMethod="#{jornadaController.complete}" 
                                   labelValue="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_jornada')}"
                                   autoCompleteConverter="#{jornadaConverter}"
                                   autoCompleteSize="30"/><br/>

            <t:FormRowCheckMulti id="postoDeTrabalhoDiasComputados" 
                                 labelValue="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_diasComputados')}" 
                                 itemValues="#{calendarioFeriadoController.diasComputados}" 
                                 selectValue="#{contratoAdministradorFlow.controller.postoNovo.diasComputados}" 
                                 selectConverter="#{diasComputadosConverter}"
                                 collectionType="java.util.HashSet"/>         
            <t:FormRowAutoComplete id="postoDeTrabalhoFeriadoCalendario" 
                                   autoCompleteValue="#{contratoAdministradorFlow.controller.postoNovo.feriadoCalendario}" 
                                   autoCompleteItem="feriadoCalendario" 
                                   autoCompleteItemLabel="#{feriadoCalendario.toString()}" 
                                   autoCompleteItemValue="#{feriadoCalendario}" 
                                   completeMethod="#{calendarioFeriadoController.complete}" 
                                   labelValue="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_feriadoCalendario')}"
                                   autoCompleteConverter="#{calendarioFeriadoConverter}"
                                   autoCompleteSize="30"/> 
            <p:tabView id="alocacaoTabs">
                <p:tab title="#{contratoAdministradorFlow.controller.getTabHeader('PostoDeTrabalho_Alocacao')}">
                    <t:ListFlowView selection="#{contratoAdministradorFlow.controller.alocacaoNova}" 
                                    value="#{contratoAdministradorFlow.controller.postoNovo.alocacoes}" 
                                    casePrefix="alocacao" 
                                    action="#{contratoAdministradorFlow.controller.prepareAlocacaoEdit}" 
                                    controller="#{contratoAdministradorFlow.controller}" 
                                    id="alocacao"
                                    specificValues="true">
                        <f:facet name="header">
                            <div class="alignRight">
                                <p:commandButton action="#{contratoAdministradorFlow.controller.prepareAlocacaoNova}"
                                                 value="#{messages.CreateLink}"/>
                            </div>
                        </f:facet>
                        <p:column width="25%" 
                                  headerText="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_Alocacao_titular')}">
                            <h:outputText value="#{item.titular.colaborador.toString()}"/>
                        </p:column>   
                        <p:column width="25%" 
                                  headerText="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_Alocacao_substituto')}">
                            <h:outputText value="#{item.substituto.colaborador.toString()}"/>
                        </p:column>                       
                    </t:ListFlowView>
                </p:tab>
                <p:tab title="#{contratoAdministradorFlow.controller.getTabHeader('PostoDeTrabalho_Remuneracao')}">
                    <t:ListFlowView selection="#{contratoAdministradorFlow.controller.remuneracaoNova}" 
                                    value="#{contratoAdministradorFlow.controller.postoNovo.remuneracoes}" 
                                    casePrefix="remuneracao" 
                                    action="#{contratoAdministradorFlow.controller.prepareRemuneracaoEdit}" 
                                    controller="#{contratoAdministradorFlow.controller}" 
                                    id="remuneracao"
                                    specificValues="true">
                        <f:facet name="header">
                            <div class="alignRight">
                                <p:commandButton action="#{contratoAdministradorFlow.controller.prepareRemuneracaoNova}"
                                                 value="#{messages.CreateLink}"/>
                            </div>
                        </f:facet>
                        <p:column headerText="#{contratoAdministradorFlow.controller.getMsgFieldLabel('PostoDeTrabalho_Remuneracao_valor')}"
                                  styleClass="alignRight">
                            <t:OutputMonetary value="#{item.valor}"/>
                        </p:column>   
                    </t:ListFlowView>
                </p:tab>
            </p:tabView>        
        </t:FormFlowCreate>
    </ui:define>
</ui:composition>

